{"ast":null,"code":"import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\n// Mock data\nconst mockLeaveRequests = [{\n  id: '1',\n  userId: '1',\n  startDate: '2024-12-23',\n  endDate: '2024-12-30',\n  comment: 'Weihnachtsurlaub',\n  status: 'APPROVED',\n  type: 'VACATION',\n  createdAt: '2024-12-01T10:00:00Z'\n}, {\n  id: '2',\n  userId: '1',\n  startDate: '2024-11-15',\n  endDate: '2024-11-15',\n  comment: 'Arzttermin',\n  status: 'PENDING',\n  type: 'SICK',\n  createdAt: '2024-11-15T08:00:00Z'\n}];\nconst mockVacationBalance = {\n  userId: '1',\n  totalDays: 30,\n  usedDays: 8,\n  remainingDays: 22,\n  year: 2024\n};\nexport const useLeavesStore = create()(persist((set, get) => ({\n  leaveRequests: mockLeaveRequests,\n  vacationBalance: mockVacationBalance,\n  isLoading: false,\n  submitLeaveRequest: async request => {\n    set({\n      isLoading: true\n    });\n    try {\n      // Simulate API call\n      await new Promise(resolve => setTimeout(resolve, 500));\n      const newRequest = {\n        ...request,\n        id: Date.now().toString(),\n        createdAt: new Date().toISOString()\n      };\n      set(state => ({\n        leaveRequests: [...state.leaveRequests, newRequest],\n        isLoading: false\n      }));\n    } catch (error) {\n      set({\n        isLoading: false\n      });\n      throw error;\n    }\n  },\n  getLeaveRequests: userId => {\n    return get().leaveRequests.filter(request => request.userId === userId);\n  },\n  getVacationBalance: userId => {\n    const balance = get().vacationBalance;\n    return (balance === null || balance === void 0 ? void 0 : balance.userId) === userId ? balance : null;\n  },\n  setVacationBalance: balance => {\n    set({\n      vacationBalance: balance\n    });\n  },\n  approveLeaveRequest: requestId => {\n    set(state => ({\n      leaveRequests: state.leaveRequests.map(request => request.id === requestId ? {\n        ...request,\n        status: 'APPROVED'\n      } : request)\n    }));\n\n    // Trigger automatic reminder creation for vacation requests\n    const approvedRequest = get().leaveRequests.find(r => r.id === requestId);\n    if (approvedRequest && approvedRequest.type === 'VACATION') {\n      // This would integrate with the reminders store\n      // For now, this is handled in the UI layer\n    }\n  },\n  rejectLeaveRequest: requestId => {\n    set(state => ({\n      leaveRequests: state.leaveRequests.map(request => request.id === requestId ? {\n        ...request,\n        status: 'REJECTED'\n      } : request)\n    }));\n  }\n}), {\n  name: 'leaves-storage',\n  storage: createJSONStorage(() => localStorage),\n  partialize: state => ({\n    leaveRequests: state.leaveRequests,\n    vacationBalance: state.vacationBalance\n  })\n}));","map":{"version":3,"names":["create","persist","createJSONStorage","mockLeaveRequests","id","userId","startDate","endDate","comment","status","type","createdAt","mockVacationBalance","totalDays","usedDays","remainingDays","year","useLeavesStore","set","get","leaveRequests","vacationBalance","isLoading","submitLeaveRequest","request","Promise","resolve","setTimeout","newRequest","Date","now","toString","toISOString","state","error","getLeaveRequests","filter","getVacationBalance","balance","setVacationBalance","approveLeaveRequest","requestId","map","approvedRequest","find","r","rejectLeaveRequest","name","storage","localStorage","partialize"],"sources":["/Users/halteverbotsocialmacpro/Desktop/ars vivai/Worky Time/worky-time-web/src/state/leaves.ts"],"sourcesContent":["import { create } from 'zustand';\nimport { persist, createJSONStorage } from 'zustand/middleware';\nimport { LeaveRequest, VacationBalance } from '../types';\n\ninterface LeavesState {\n  leaveRequests: LeaveRequest[];\n  vacationBalance: VacationBalance | null;\n  isLoading: boolean;\n  submitLeaveRequest: (request: Omit<LeaveRequest, 'id' | 'createdAt'>) => Promise<void>;\n  getLeaveRequests: (userId: string) => LeaveRequest[];\n  getVacationBalance: (userId: string) => VacationBalance | null;\n  setVacationBalance: (balance: VacationBalance) => void;\n  approveLeaveRequest: (requestId: string) => void;\n  rejectLeaveRequest: (requestId: string) => void;\n}\n\n// Mock data\nconst mockLeaveRequests: LeaveRequest[] = [\n  {\n    id: '1',\n    userId: '1',\n    startDate: '2024-12-23',\n    endDate: '2024-12-30',\n    comment: 'Weihnachtsurlaub',\n    status: 'APPROVED',\n    type: 'VACATION',\n    createdAt: '2024-12-01T10:00:00Z'\n  },\n  {\n    id: '2',\n    userId: '1',\n    startDate: '2024-11-15',\n    endDate: '2024-11-15',\n    comment: 'Arzttermin',\n    status: 'PENDING',\n    type: 'SICK',\n    createdAt: '2024-11-15T08:00:00Z'\n  }\n];\n\nconst mockVacationBalance: VacationBalance = {\n  userId: '1',\n  totalDays: 30,\n  usedDays: 8,\n  remainingDays: 22,\n  year: 2024\n};\n\nexport const useLeavesStore = create<LeavesState>()(\n  persist(\n    (set, get) => ({\n      leaveRequests: mockLeaveRequests,\n      vacationBalance: mockVacationBalance,\n      isLoading: false,\n\n      submitLeaveRequest: async (request) => {\n        set({ isLoading: true });\n        \n        try {\n          // Simulate API call\n          await new Promise(resolve => setTimeout(resolve, 500));\n          \n          const newRequest: LeaveRequest = {\n            ...request,\n            id: Date.now().toString(),\n            createdAt: new Date().toISOString()\n          };\n          \n          set(state => ({\n            leaveRequests: [...state.leaveRequests, newRequest],\n            isLoading: false\n          }));\n        } catch (error) {\n          set({ isLoading: false });\n          throw error;\n        }\n      },\n\n      getLeaveRequests: (userId: string) => {\n        return get().leaveRequests.filter(request => request.userId === userId);\n      },\n\n      getVacationBalance: (userId: string) => {\n        const balance = get().vacationBalance;\n        return balance?.userId === userId ? balance : null;\n      },\n\n      setVacationBalance: (balance: VacationBalance) => {\n        set({ vacationBalance: balance });\n      },\n\n      approveLeaveRequest: (requestId: string) => {\n        set(state => ({\n          leaveRequests: state.leaveRequests.map(request =>\n            request.id === requestId\n              ? { ...request, status: 'APPROVED' as const }\n              : request\n          )\n        }));\n        \n        // Trigger automatic reminder creation for vacation requests\n        const approvedRequest = get().leaveRequests.find(r => r.id === requestId);\n        if (approvedRequest && approvedRequest.type === 'VACATION') {\n          // This would integrate with the reminders store\n          // For now, this is handled in the UI layer\n        }\n      },\n\n      rejectLeaveRequest: (requestId: string) => {\n        set(state => ({\n          leaveRequests: state.leaveRequests.map(request =>\n            request.id === requestId\n              ? { ...request, status: 'REJECTED' as const }\n              : request\n          )\n        }));\n      }\n    }),\n    {\n      name: 'leaves-storage',\n      storage: createJSONStorage(() => localStorage),\n      partialize: (state) => ({ \n        leaveRequests: state.leaveRequests,\n        vacationBalance: state.vacationBalance \n      }),\n    }\n  )\n);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}