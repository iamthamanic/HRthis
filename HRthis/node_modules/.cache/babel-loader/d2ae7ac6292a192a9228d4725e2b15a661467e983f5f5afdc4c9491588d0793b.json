{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import{useAuthStore}from'../state/auth';import{useLeavesStore}from'../state/leaves';import{cn}from'../utils/cn';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const MyRequestsScreen=()=>{const navigate=useNavigate();const{user}=useAuthStore();const{getLeaveRequests}=useLeavesStore();const[requests,setRequests]=useState([]);useEffect(()=>{if(user){const userRequests=getLeaveRequests(user.id);setRequests(userRequests.sort((a,b)=>new Date(b.createdAt).getTime()-new Date(a.createdAt).getTime()));}},[user,getLeaveRequests]);const getStatusColor=status=>{switch(status){case'APPROVED':return'bg-green-100 text-green-800';case'REJECTED':return'bg-red-100 text-red-800';default:return'bg-yellow-100 text-yellow-800';}};const getStatusText=status=>{switch(status){case'APPROVED':return'Genehmigt';case'REJECTED':return'Abgelehnt';default:return'Ausstehend';}};const getTypeIcon=type=>{return type==='VACATION'?'üèñÔ∏è':'üè•';};const getTypeText=type=>{return type==='VACATION'?'Urlaub':'Krankheit';};const formatDate=dateString=>{return new Date(dateString).toLocaleDateString('de-DE');};const calculateDays=(startDate,endDate)=>{const start=new Date(startDate);const end=new Date(endDate);const diffTime=Math.abs(end.getTime()-start.getTime());const diffDays=Math.ceil(diffTime/(1000*60*60*24))+1;return diffDays;};return/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 bg-gray-50 min-h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 px-4 py-6 overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center\",children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-bold text-gray-900\",children:\"Meine Antr\\xE4ge\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/request-leave'),className:\"bg-blue-600 px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-medium\",children:\"+ Neu\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:requests.map(request=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl p-4 shadow-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-2xl mr-3\",children:getTypeIcon(request.type)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-base font-semibold text-gray-900\",children:getTypeText(request.type)}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[formatDate(request.startDate),\" - \",formatDate(request.endDate)]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:cn(\"px-3 py-1 rounded-full\",getStatusColor(request.status)),children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-medium\",children:getStatusText(request.status)})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-3\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"Dauer: \",calculateDays(request.startDate,request.endDate),\" Tag\",calculateDays(request.startDate,request.endDate)!==1?'e':'']}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[\"Eingereicht am \",formatDate(request.createdAt.split('T')[0])]})]}),request.comment&&/*#__PURE__*/_jsx(\"div\",{className:\"p-3 bg-gray-50 rounded-lg\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-700\",children:[\"\\\"\",request.comment,\"\\\"\"]})})]},request.id))}),requests.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-xl p-8 flex flex-col items-center shadow-sm\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-4xl mb-4\",children:\"\\uD83D\\uDCDD\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-900 mb-2\",children:\"Keine Antr\\xE4ge\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-center mb-4\",children:\"Sie haben noch keine Urlaubs- oder Krankmeldungen eingereicht.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/request-leave'),className:\"bg-blue-600 px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-medium\",children:\"Ersten Antrag stellen\"})})]})]})});};","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useAuthStore","useLeavesStore","cn","jsx","_jsx","jsxs","_jsxs","MyRequestsScreen","navigate","user","getLeaveRequests","requests","setRequests","userRequests","id","sort","a","b","Date","createdAt","getTime","getStatusColor","status","getStatusText","getTypeIcon","type","getTypeText","formatDate","dateString","toLocaleDateString","calculateDays","startDate","endDate","start","end","diffTime","Math","abs","diffDays","ceil","className","children","onClick","map","request","split","comment","length"],"sources":["/Users/halteverbotsocialmacpro/Desktop/ars vivai/Worky Time/worky-time-web/src/screens/MyRequestsScreen.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuthStore } from '../state/auth';\nimport { useLeavesStore } from '../state/leaves';\nimport { LeaveRequest } from '../types';\nimport { cn } from '../utils/cn';\n\nexport const MyRequestsScreen = () => {\n  const navigate = useNavigate();\n  const { user } = useAuthStore();\n  const { getLeaveRequests } = useLeavesStore();\n  \n  const [requests, setRequests] = useState<LeaveRequest[]>([]);\n\n  useEffect(() => {\n    if (user) {\n      const userRequests = getLeaveRequests(user.id);\n      setRequests(userRequests.sort((a, b) => \n        new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n      ));\n    }\n  }, [user, getLeaveRequests]);\n\n  const getStatusColor = (status: string): string => {\n    switch (status) {\n      case 'APPROVED':\n        return 'bg-green-100 text-green-800';\n      case 'REJECTED':\n        return 'bg-red-100 text-red-800';\n      default:\n        return 'bg-yellow-100 text-yellow-800';\n    }\n  };\n\n  const getStatusText = (status: string): string => {\n    switch (status) {\n      case 'APPROVED':\n        return 'Genehmigt';\n      case 'REJECTED':\n        return 'Abgelehnt';\n      default:\n        return 'Ausstehend';\n    }\n  };\n\n  const getTypeIcon = (type: string) => {\n    return type === 'VACATION' ? 'üèñÔ∏è' : 'üè•';\n  };\n\n  const getTypeText = (type: string) => {\n    return type === 'VACATION' ? 'Urlaub' : 'Krankheit';\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('de-DE');\n  };\n\n  const calculateDays = (startDate: string, endDate: string) => {\n    const start = new Date(startDate);\n    const end = new Date(endDate);\n    const diffTime = Math.abs(end.getTime() - start.getTime());\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)) + 1;\n    return diffDays;\n  };\n\n  return (\n    <div className=\"flex-1 bg-gray-50 min-h-screen\">\n      <div className=\"flex-1 px-4 py-6 overflow-y-auto\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center\">\n            <h1 className=\"text-xl font-bold text-gray-900\">\n              Meine Antr√§ge\n            </h1>\n          </div>\n          <button \n            onClick={() => navigate('/request-leave')}\n            className=\"bg-blue-600 px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            <span className=\"text-white font-medium\">+ Neu</span>\n          </button>\n        </div>\n\n        <div className=\"space-y-4\">\n          {requests.map((request) => (\n            <div key={request.id} className=\"bg-white rounded-xl p-4 shadow-sm\">\n              <div className=\"flex justify-between items-start mb-3\">\n                <div className=\"flex items-center\">\n                  <span className=\"text-2xl mr-3\">{getTypeIcon(request.type)}</span>\n                  <div>\n                    <p className=\"text-base font-semibold text-gray-900\">\n                      {getTypeText(request.type)}\n                    </p>\n                    <p className=\"text-sm text-gray-500\">\n                      {formatDate(request.startDate)} - {formatDate(request.endDate)}\n                    </p>\n                  </div>\n                </div>\n                <div className={cn(\n                  \"px-3 py-1 rounded-full\",\n                  getStatusColor(request.status)\n                )}>\n                  <span className=\"text-xs font-medium\">\n                    {getStatusText(request.status)}\n                  </span>\n                </div>\n              </div>\n              \n              <div className=\"flex justify-between items-center mb-3\">\n                <p className=\"text-sm text-gray-600\">\n                  Dauer: {calculateDays(request.startDate, request.endDate)} Tag\n                  {calculateDays(request.startDate, request.endDate) !== 1 ? 'e' : ''}\n                </p>\n                <p className=\"text-xs text-gray-500\">\n                  Eingereicht am {formatDate(request.createdAt.split('T')[0])}\n                </p>\n              </div>\n\n              {request.comment && (\n                <div className=\"p-3 bg-gray-50 rounded-lg\">\n                  <p className=\"text-sm text-gray-700\">\n                    \"{request.comment}\"\n                  </p>\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n\n        {requests.length === 0 && (\n          <div className=\"bg-white rounded-xl p-8 flex flex-col items-center shadow-sm\">\n            <span className=\"text-4xl mb-4\">üìù</span>\n            <h2 className=\"text-lg font-semibold text-gray-900 mb-2\">\n              Keine Antr√§ge\n            </h2>\n            <p className=\"text-gray-600 text-center mb-4\">\n              Sie haben noch keine Urlaubs- oder Krankmeldungen eingereicht.\n            </p>\n            <button \n              onClick={() => navigate('/request-leave')}\n              className=\"bg-blue-600 px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors\"\n            >\n              <span className=\"text-white font-medium\">Ersten Antrag stellen</span>\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}